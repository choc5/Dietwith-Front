;/*FB_PKG_DELIM*/

__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),66);
__d("IGDSErrorPanoOutlineIcon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(3),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{d:"M12.001.504a11.5 11.5 0 1 0 11.5 11.5 11.513 11.513 0 0 0-11.5-11.5Zm0 21a9.5 9.5 0 1 1 9.5-9.5 9.51 9.51 0 0 1-9.5 9.5Zm0-6.594a1.279 1.279 0 1 0 1.278 1.279A1.28 1.28 0 0 0 12 14.91Zm0-8.443a1.326 1.326 0 0 0-.97.412 1.154 1.154 0 0 0-.313.872l.362 5.057a.928.928 0 0 0 1.84 0l.363-5.057a1.152 1.152 0 0 0-.313-.871 1.323 1.323 0 0 0-.97-.413Z"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:d})),b[1]=a,b[2]=d):d=b[2];return d}b=j.memo(a);g["default"]=b}),98);
__d("IGDSErrorOutlineIcon.react",["IGDSErrorPanoOutlineIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx(c("IGDSErrorPanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=d):d=b[1];return d}b=j.memo(a);g["default"]=b}),98);
__d("IGDSFace2OutlineIcon.react",["IGDSFace2PanoOutlineIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx(c("IGDSFace2PanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=d):d=b[1];return d}b=j.memo(a);g["default"]=b}),98);
__d("IGDSReplyPanoOutline24Icon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(3),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{d:"M14 8.999H4.413l5.294-5.292a1 1 0 1 0-1.414-1.414l-7 6.998c-.014.014-.019.033-.032.048A.933.933 0 0 0 1 9.998V10c0 .027.013.05.015.076a.907.907 0 0 0 .282.634l6.996 6.998a1 1 0 0 0 1.414-1.414L4.415 11H14a7.008 7.008 0 0 1 7 7v3.006a1 1 0 0 0 2 0V18a9.01 9.01 0 0 0-9-9Z"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:d})),b[1]=a,b[2]=d):d=b[2];return d}b=j.memo(a);g["default"]=b}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSMessageContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEXT:1,MEDIA_PREVIEW:2,AUDIO_CLIP:4,XMA_FALLBACK:8,LWA_WAVE:16,ADMIN:32,FILE_ATTACHMENT:64,GLYPH:128,TOMBSTONE:256,STORY_REPLY:512,SINGLE_XMA:1024,HSCROLL_XMA:2048,STICKER:4096,FORWARD_INDICATOR:8192,ANIMATED_IMAGE:16384,NULL_STATE:32768,ENCRYPTION_PLACEHOLDER:65536,FUTUREPROOF_PLACEHOLDER:131072,UNAVAILABLE_PLACEHOLDER:262144,LOCATION_PLACEHOLDER:524288,POLL_CREATION_PLACEHOLDER:1048576,CONTACT_SHARE_PLACEHOLDER:2097152,STORY_MENTION_PLACEHOLDER:4194304,META_AI_MESSAGE_PLACEHOLDER:8388608,BUMP_MESSAGE_PLACEHOLDER:16777216,BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_PLACEHOLDER:33554432,STICKER_RECEIVER_FETCH_UNSUPPORTED_PLACEHOLDER:67108864});f["default"]=a}),66);
__d("LSOptimisticUpsertReaction",["LSArrayGetObjectAt","LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[2],d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(a){return void 0?d[9]=!1:d[9]=!0,d[9]?c.resolve(d[10]=void 0):c.sequence([function(a){return d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=new c.Map(),d[28]="product_params",d[23]=d[21].get(d[28]),d[21],d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[30]=!1:d[30]=!0,d[30]?d[31]=void 0:(d[34]=new c.Map(),d[38]="product_type",d[35]=d[23].get(d[38]),d[23],d[35]!==void 0?d[34].set(d[38],d[35]):0,d[39]="product_extras",d[36]=d[23].get(d[39]),d[23],d[36]?d[37]=!1:d[37]=!0,d[37]?0:(d[36]?d[40]=!1:d[40]=!0,d[40]?d[41]=void 0:(d[44]=d[36].get("__typename"),d[36],d[44]==="XMSGStoryReplyExtras"?(d[46]=new c.Map(),d[49]="logging",d[47]=d[36].get(d[49]),d[36],d[47]?d[48]=!1:d[48]=!0,d[48]?0:(d[47]?d[50]=!1:d[50]=!0,d[50]?d[51]=void 0:(d[54]=new c.Map(),d[61]="story_author_fbid",d[55]=d[47].get(d[61]),d[47],d[55]!==void 0?d[54].set(d[61],d[55]):0,d[62]="camera_post_type",d[56]=d[47].get(d[62]),d[47],d[56]!==void 0?d[54].set(d[62],d[56]):0,d[63]="story_type",d[57]=d[47].get(d[63]),d[47],d[57]!==void 0?d[54].set(d[63],d[57]):0,d[64]="post_source",d[58]=d[47].get(d[64]),d[47],d[58]!==void 0?d[54].set(d[64],d[58]):0,d[65]="fb_post_type",d[59]=d[47].get(d[65]),d[47],d[59]!==void 0?d[54].set(d[65],d[59]):0,d[66]="story_reply_type",d[60]=d[47].get(d[66]),d[47],d[60]!==void 0?d[54].set(d[66],d[60]):0,d[51]=d[54]),d[52]=d[51].keys(),d[53]=c.i64.of_int32(d[52].length),c.i64.neq(d[53],c.i64.cast([0,0]))?d[46].set(d[49],d[51]):0),d[45]=d[46]):(d[44]==="XMSGMarketplaceExtras"?(d[47]=new c.Map(),d[66]="listing_id",d[48]=d[36].get(d[66]),d[36],d[48]!==void 0?d[47].set(d[66],d[48]):0,d[67]="initial_clicked_component",d[49]=d[36].get(d[67]),d[36],d[49]!==void 0?d[47].set(d[67],d[49]):0,d[68]="initial_tracking",d[50]=d[36].get(d[68]),d[36],d[50]!==void 0?d[47].set(d[68],d[50]):0,d[69]="referral_surface",d[51]=d[36].get(d[69]),d[36],d[51]!==void 0?d[47].set(d[69],d[51]):0,d[70]="referral_story_type",d[52]=d[36].get(d[70]),d[36],d[52]!==void 0?d[47].set(d[70],d[52]):0,d[71]="referral_ui_component",d[53]=d[36].get(d[71]),d[36],d[53]!==void 0?d[47].set(d[71],d[53]):0,d[72]="surface",d[54]=d[36].get(d[72]),d[36],d[54]!==void 0?d[47].set(d[72],d[54]):0,d[73]="tracking",d[55]=d[36].get(d[73]),d[36],d[55]!==void 0?d[47].set(d[73],d[55]):0,d[74]="ui_component",d[56]=d[36].get(d[74]),d[36],d[56]!==void 0?d[47].set(d[74],d[56]):0,d[75]="ad_id",d[57]=d[36].get(d[75]),d[36],d[57]!==void 0?d[47].set(d[75],d[57]):0,d[76]="server_session_id",d[58]=d[36].get(d[76]),d[36],d[58]!==void 0?d[47].set(d[76],d[58]):0,d[77]="cf_page_id",d[59]=d[36].get(d[77]),d[36],d[59]!==void 0?d[47].set(d[77],d[59]):0,d[78]="live_shopping_video_id",d[60]=d[36].get(d[78]),d[36],d[60]!==void 0?d[47].set(d[78],d[60]):0,d[79]="logging_id",d[61]=d[36].get(d[79]),d[36],c.i64.neq(d[61],void 0)?d[47].set(d[79],d[61]):0,d[80]="photo_ids",d[62]=d[36].get(d[80]),d[36],d[62]?d[63]=!1:d[63]=!0,d[63]?0:d[47].set(d[80],d[62]),d[81]="is_customized_message",d[64]=d[36].get(d[81]),d[36],d[64]!==void 0?d[47].set(d[81],d[64]):0,d[82]="referral_code",d[65]=d[36].get(d[82]),d[36],d[65]!==void 0?d[47].set(d[82],d[65]):0,d[46]=d[47]):(d[44]==="XMSGClickToMessengerAdExtras"?(d[48]=new c.Map(),d[50]="encrypted_ads_token",d[49]=d[36].get(d[50]),d[36],d[49]!==void 0?d[48].set(d[50],d[49]):0,d[47]=d[48]):(d[44]==="XMSGZorroMessageExtras"?(d[49]=new c.Map(),d[51]="is_enabled",d[50]=d[36].get(d[51]),d[36],d[50]!==void 0?d[49].set(d[51],d[50]):0,d[48]=d[49]):(d[44]==="XMSGGenAISuggestedPromptExtras"?(d[50]=new c.Map(),d[52]="prompt_type",d[51]=d[36].get(d[52]),d[36],d[51]!==void 0?d[50].set(d[52],d[51]):0,d[49]=d[50]):(d[44]==="XMSGGenAIMultiModalExtras"?(d[51]=new c.Map(),d[54]="should_skip_genai_eval",d[52]=d[36].get(d[54]),d[36],d[52]!==void 0?d[51].set(d[54],d[52]):0,d[55]="associated_multimodal_message_id",d[53]=d[36].get(d[55]),d[36],d[53]!==void 0?d[51].set(d[55],d[53]):0,d[50]=d[51]):(d[44]==="XMSGGenAIFlashImagineExtras"?(d[52]=new c.Map(),d[54]="seed",d[53]=d[36].get(d[54]),d[36],c.i64.neq(d[53],void 0)?d[52].set(d[54],d[53]):0,d[51]=d[52]):(d[44]==="XMSGShareSheetExtras"?(d[53]=new c.Map(),d[55]="recipient_selection_session_id",d[54]=d[36].get(d[55]),d[36],d[54]!==void 0?d[53].set(d[55],d[54]):0,d[52]=d[53]):(d[44]==="XMSGGenAIAssistantAPIExtras"?(d[54]=new c.Map(),d[59]="referrer_session_id",d[55]=d[36].get(d[59]),d[36],d[55]!==void 0?d[54].set(d[59],d[55]):0,d[60]="thread_session_id",d[56]=d[36].get(d[60]),d[36],d[56]!==void 0?d[54].set(d[60],d[56]):0,d[61]="prompt_id",d[57]=d[36].get(d[61]),d[36],d[57]!==void 0?d[54].set(d[61],d[57]):0,d[62]="prompt_type",d[58]=d[36].get(d[62]),d[36],d[58]!==void 0?d[54].set(d[62],d[58]):0,d[53]=d[54]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGMessageSendProductExtrasUnion: ","",d[44]].join("")),d[53]=d[36]),d[52]=d[53]),d[51]=d[52]),d[50]=d[51]),d[49]=d[50]),d[48]=d[49]),d[47]=d[48]),d[46]=d[47]),d[45]=d[46]),d[45].set("__typename",d[44]),d[41]=d[45]),d[42]=d[41].keys(),d[43]=c.i64.of_int32(d[42].length),c.i64.neq(d[43],c.i64.cast([0,0]))?d[34].set(d[39],d[41]):0),d[31]=d[34]),d[32]=d[31].keys(),d[33]=c.i64.of_int32(d[32].length),c.i64.neq(d[33],c.i64.cast([0,0]))?d[22].set(d[28],d[31]):0),d[29]="logging_metadata",d[25]=d[21].get(d[29]),d[21],d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve():c.sequence([function(a){return d[25]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=void 0):c.sequence([function(a){return d[34]=new c.Map(),d[39]="feature_tags",d[35]=d[25].get(d[39]),d[25],d[35]?d[36]=!1:d[36]=!0,d[36]?0:(d[41]=c.i64.of_int32(d[35].length),c.i64.neq(d[41],c.i64.cast([0,0]))?d[34].set(d[39],d[35]):0),d[40]="content_model",d[37]=d[25].get(d[40]),d[25],d[37]?d[38]=!1:d[38]=!0,d[38]?c.resolve():c.sequence([function(a){return d[37]?d[41]=!1:d[41]=!0,d[41]?c.resolve(d[42]=void 0):c.sequence([function(a){return d[45]=new c.Map(),d[50]="containing_post",d[46]=d[37].get(d[50]),d[37],d[46]?d[47]=!1:d[47]=!0,d[47]?c.resolve():c.sequence([function(a){return d[46]?d[52]=!1:d[52]=!0,d[52]?c.resolve(d[53]=void 0):c.sequence([function(a){return d[56]=new c.Map(),d[64]="key_type",d[57]=d[46].get(d[64]),d[46],d[57]!==void 0?d[56].set(d[64],d[57]):0,d[65]="fb_post_type",d[58]=d[46].get(d[65]),d[46],d[58]?d[59]=!1:d[59]=!0,d[59]?0:(d[68]=c.i64.of_int32(d[58].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[56].set(d[65],d[58]):0),d[66]="photos",d[60]=d[46].get(d[66]),d[46],d[60]?d[61]=!1:d[61]=!0,d[61]?c.resolve():c.sequence([function(a){return d[60]?d[68]=!1:d[68]=!0,d[68]?c.resolve(d[69]=void 0):c.sequence([function(a){return d[71]=c.createArray(),d[72]=c.i64.of_int32(d[60].length),c.i64.gt(d[72],c.i64.cast([0,0]))?c.loopAsync(d[72],function(a){return d[73]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[60],d[73]).then(function(a){return a=a,d[74]=a[0],d[75]=a[1],a})},function(a){return d[76]=new c.Map(),d[78]="key_type",d[77]=d[74].get(d[78]),d[74],d[77]!==void 0?d[76].set(d[78],d[77]):0,d[79]=(d[71].push(d[76]),d[71])}])}):c.resolve()},function(a){return d[69]=d[71]}])},function(a){return d[70]=c.i64.of_int32(d[69].length),c.i64.neq(d[70],c.i64.cast([0,0]))?d[56].set(d[66],d[69]):0}])},function(a){return d[67]="videos",d[62]=d[46].get(d[67]),d[46],d[62]?d[63]=!1:d[63]=!0,d[63]?c.resolve():c.sequence([function(a){return d[62]?d[68]=!1:d[68]=!0,d[68]?c.resolve(d[69]=void 0):c.sequence([function(a){return d[71]=c.createArray(),d[72]=c.i64.of_int32(d[62].length),c.i64.gt(d[72],c.i64.cast([0,0]))?c.loopAsync(d[72],function(a){return d[73]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[62],d[73]).then(function(a){return a=a,d[74]=a[0],d[75]=a[1],a})},function(a){return d[76]=new c.Map(),d[78]="key_type",d[77]=d[74].get(d[78]),d[74],d[77]!==void 0?d[76].set(d[78],d[77]):0,d[79]=(d[71].push(d[76]),d[71])}])}):c.resolve()},function(a){return d[69]=d[71]}])},function(a){return d[70]=c.i64.of_int32(d[69].length),c.i64.neq(d[70],c.i64.cast([0,0]))?d[56].set(d[67],d[69]):0}])},function(a){return d[53]=d[56]}])},function(a){return d[54]=d[53].keys(),d[55]=c.i64.of_int32(d[54].length),c.i64.neq(d[55],c.i64.cast([0,0]))?d[45].set(d[50],d[53]):0}])},function(a){return d[51]="metadata",d[48]=d[37].get(d[51]),d[37],d[48]?d[49]=!1:d[49]=!0,d[49]?0:(d[48]?d[52]=!1:d[52]=!0,d[52]?d[53]=void 0:(d[56]=d[48].get("__typename"),d[48],d[56]==="XMSGGroupsContentLoggingMetadata"?(d[58]=new c.Map(),d[60]="num_members",d[59]=d[48].get(d[60]),d[48],c.i64.neq(d[59],void 0)?d[58].set(d[60],d[59]):0,d[57]=d[58]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[56]].join("")),d[57]=d[48]),d[57].set("__typename",d[56]),d[53]=d[57]),d[54]=d[53].keys(),d[55]=c.i64.of_int32(d[54].length),c.i64.neq(d[55],c.i64.cast([0,0]))?d[45].set(d[51],d[53]):0),d[42]=d[45]}])},function(a){return d[43]=d[42].keys(),d[44]=c.i64.of_int32(d[43].length),c.i64.neq(d[44],c.i64.cast([0,0]))?d[34].set(d[40],d[42]):0}])},function(a){return d[31]=d[34]}])},function(a){return d[32]=d[31].keys(),d[33]=c.i64.of_int32(d[32].length),c.i64.neq(d[33],c.i64.cast([0,0]))?d[22].set(d[29],d[31]):0}])},function(a){return d[27]=c.toJSON(d[22]),d[10]=d[27]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[13],d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.timestampMs;d[2]=b.messageId;d[3]=b.actorId;d[4]=b.reaction;d[5]=b.sendAttribution;d[6]=b.pluginType;return c("LSOptimisticUpsertReaction").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSUpdateOrInsertReactionV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(226).fetch([[[a[0],a[1],a[2]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(12).fetch([[[a[1]]],"messageId"]).next().then(function(d,e){var c=d.done;d=d.value;return c?0:(e=d.item,b.sequence([function(c){return b.forEach(b.filter(b.db.table(226).fetch([[[a[0],a[1],a[2]]],"optimistic"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.reactionFbid,a[2])&&b.i64.lt(c.authorityLevel,a[5])}),function(a){return a["delete"]()})},function(c){return b.db.table(226).add({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.timestampMs,authorityLevel:a[5],count:a[4],viewerIsReactor:a[6],viewerReactionTimestampMs:a[7],lastUpdatedTimestampMs:a[8]})}]))}):(e=d.item,c[2]=e.lastUpdatedTimestampMs,c[1]=e.authorityLevel,b.i64.eq(a[5],b.i64.cast([0,20]))||b.i64.eq(c[1],b.i64.cast([0,80]))&&b.i64.eq(a[5],b.i64.cast([0,80]))||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(b.i64.add(c[2],b.i64.cast([0,2e3])),a[8])||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,60]))||b.i64.eq(c[1],b.i64.cast([0,60]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(c[2],a[8])?c[3]=!0:c[3]=!1,c[3]?b.db.table(226).put({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.messageTimestamp,reactionLiteral:a[3],count:a[4],authorityLevel:a[5],viewerIsReactor:a[6],viewerReactionTimestampMs:b.i64.cast([0,0]),lastUpdatedTimestampMs:a[8]}):b.resolve())})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[18],d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[26]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[27]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[26],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,238]))?d[25]=!1:(c.i64.eq(d[26],c.i64.cast([0,0]))?d[28]=!c.i64.eq(c.i64.and_(d[27],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,1]))?d[29]=!c.i64.eq(c.i64.and_(d[27],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,2]))?d[30]=!c.i64.eq(c.i64.and_(d[27],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,3]))?d[31]=!c.i64.eq(c.i64.and_(d[27],d[24]),c.i64.cast([0,0])):d[31]=!1,d[30]=d[31]),d[29]=d[30]),d[28]=d[29]),d[25]=d[28]),d[20]===d[25]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[7],d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.actorId;d[1]=b.threadId;d[2]=b.messageId;d[3]=b.messageTimestamp;d[4]=b.reactionFbid;d[5]=b.currentCount;d[6]=b.viewerIsReactor;d[7]=b.reactionStyle;d[8]=b.operation;d[9]=b.reactionLiteral;return c("LSOptimisticUpsertReactionV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSThreadAttributionStore",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,b){var c;a=(c=(c=i.get(b))!=null?c:a)!=null?c:{type:"MWLSEntrypoint",value:"unknown"};i["delete"](b);return a}function b(a,b){i.set(a,{type:"MWLSEntrypoint",value:b})}function c(a,b){b=(h||(h=d("I64"))).of_string(b);i.set(a,{type:"LSThreadAttribution",value:b})}function e(a){i.set("",{type:"MWLSEntrypoint",value:a})}function f(){var a=i.get("");if(a==null||a.type==="LSThreadAttribution")return"unknown";else return a.value}g.getSource=a;g.setSource=b;g.setLSMessagingThreadAttribution=c;g.setSourceForNewThread=e;g.getSourceForNewThread=f}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSource({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));if(b.type==="LSThreadAttribution")return b.value;a=b.value;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="timeline"||a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSource=a}),98);
__d("MessagingCommunityType",[],(function(a,b,c,d,e,f){a=Object.freeze({FB_COMMUNITY:0,STANDALONE_COMMUNITY:1});f["default"]=a}),66);
__d("MWCMisStandAloneCommunity",["I64","LSIntEnum","MessagingCommunityType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingCommunityType").STANDALONE_COMMUNITY))}g["default"]=a}),98);
__d("MWChatFilePreProcessingErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__Tgh_5naYWqz__JHASH__")};g.invalidFileFormat=a}),226);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._("__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._("__JHASH__GVmFuh2jycz__JHASH__")}};b=function(a){return{body:h._("__JHASH__TAA-hbgGa5n__JHASH__",[h._param("limit",a)]),title:h._("__JHASH__L_Ni3O-TarB__JHASH__")}};c=function(a){return{body:h._("__JHASH__-3D7kzgvAq5__JHASH__",[h._param("limit",a)]),title:h._("__JHASH__syTHdrAlZYC__JHASH__")}};d=function(){return{body:h._("__JHASH__1WylqAbhvtc__JHASH__"),title:h._("__JHASH__hio_8S892IQ__JHASH__")}};g.maxFileSizeExceeded=a;g.maxFilesNumberExceeded=b;g.maxMediaNumberExceeded=c;g.unsupportedFile=d}),226);
__d("MWMediaRenderQplUtils",["I64","LSBitFlag","LSIntEnum","LSMessageContentType","LSMessagingInitiatingSource","LSXmaContentType","MessagingAttachmentType","MessagingThreadType","QPLUserFlow","Random","objectEntries","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react"),l=k.useEffect,m=k.useMemo,n=c("qpl")._(25302828,"2195"),o=1e3*10,p=c("objectEntries")(c("LSMessageContentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function a(a){return q(a.displayedContentTypes)}function q(a){if(d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),a)){var b;return(b=p.get(1024))!=null?b:"UNKNOWN"}return(b=p.get((j||(j=d("I64"))).to_float(a)))!=null?b:"UNKNOWN"}function r(a){var b;if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))b=(i||(i=d("LSIntEnum"))).ofNumber(16384);else if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))b=(i||(i=d("LSIntEnum"))).ofNumber(2);else if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))b=(i||(i=d("LSIntEnum"))).ofNumber(2);else if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)))b=(i||(i=d("LSIntEnum"))).ofNumber(4);else if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))b=(i||(i=d("LSIntEnum"))).ofNumber(64);else if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))b=(i||(i=d("LSIntEnum"))).ofNumber(64);else if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))b=(i||(i=d("LSIntEnum"))).ofNumber(1024);else return"UNKNOWN";return q(b)}var s=c("objectEntries")(c("MessagingAttachmentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function b(a){return t(a.attachmentType)}function t(a){return(a=s.get((j||(j=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var u=c("objectEntries")(c("MessagingThreadType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function e(a){a=a.threadType;return v(a)}function v(a){return(a=u.get((j||(j=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var w=c("objectEntries")(c("LSXmaContentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function x(a){return(a=w.get((j||(j=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var y=c("objectEntries")(c("LSMessagingInitiatingSource")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function f(a){return a!=null?(a=y.get((j||(j=d("I64"))).to_float(a)))!=null?a:"UNKNOWN":"UNKNOWN"}function z(a,b){return{addAnnotations:function(d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},addPoint:function(d,e){e&&c("QPLUserFlow").addAnnotations(a,e,{instanceKey:b}),c("QPLUserFlow").addPoint(a,d,{instanceKey:b})},endCancel:function(d){c("QPLUserFlow").endCancel(a,{cancelReason:d,instanceKey:b})},endFail:function(d,e){c("QPLUserFlow").endFailure(a,d,{annotations:e,instanceKey:b})},endSuccess:function(d){c("QPLUserFlow").endSuccess(a,{annotations:d,instanceKey:b})},getInstanceKey:function(){return b},markError:function(d,e,f){return c("QPLUserFlow").markError(a,d,{debugInfo:e,error:f,instanceKey:b})}}}function A(a,b,d){var e=a.attachmentType,f=m(function(){var f=B();c("QPLUserFlow").start(n,{annotations:{string:{attachment_type:t(e),content_type:r(e),entry_point:d,thread_type:v(b),transport_key:a.transportKey}},cancelOnUnload:!0,instanceKey:f,timeoutInMs:o});a.xmaContentType!=null&&c("QPLUserFlow").addAnnotations(n,{string:{xma_content_type:x(a.xmaContentType)}},{instanceKey:f});return babelHelpers["extends"]({},z(n,f))},[a.messageId]);l(function(){return function(){f==null?void 0:f.endCancel(706)}},[f]);return f}function B(){return Date.now()+Math.round(d("Random").random()*1e4)}g.event=n;g.QPL_TIMEOUT=o;g.getMessageContentTypeString=a;g.getMessageContentTypeStringFromEnum=q;g.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate=r;g.getAttachmentTypeString=b;g.getAttachmentTypeStringFromEnum=t;g.getThreadTypeString=e;g.getThreadTypeStringFromEnum=v;g.getXmaContentTypeStringFromEnum=x;g.getMessagingInitiationSourceStringFromEnum=f;g.createQplFlowCommon=z;g.useCommonMediaRenderQplForAttachment=A}),98);
__d("MWMediaComposerRenderQpl",["LSGetAttachmentType","MWMediaRenderQplUtils","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.useEffect,k=i.useMemo;function a(a,b,e){var f;a=l(a);b=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(b);c("QPLUserFlow").start((f=d("MWMediaRenderQplUtils")).event,{annotations:{string:{attachment_type:f.getAttachmentTypeStringFromEnum(b),content_type:f.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(b),entry_point:"composer_view",thread_type:f.getThreadTypeString(e)}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:f.QPL_TIMEOUT})}function b(a,b){a=l(a);c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").event,{annotations:{string:{cancel_reason:b}},instanceKey:a})}function e(a,b){a=l(a);c("QPLUserFlow").addPoint(d("MWMediaRenderQplUtils").event,b,{instanceKey:a})}function f(a){var b=l(a.offlineAttachmentId);c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{string:{attachment_type:d("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(a.attachmentType),content_type:d("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(a.attachmentType)}},{instanceKey:b});var e=k(function(){return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,b))},[]);j(function(){return function(){e==null?void 0:e.endCancel(706)}},[e]);return e}function l(a){a=a.split("");return a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0)}g.startMediaComposerRenderQpl=a;g.endCancelMediaComposerRenderQpl=b;g.addPointMediaComposerRenderQpl=e;g.useMediaComposerRenderQpl=f}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){var h=(yield (k||(k=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,e=a.offlineAttachmentId,f=a.attachmentType!=null?(j||(j=d("LSIntEnum"))).ofNumber(a.attachmentType):yield d("LSGetAttachmentType").LSGetAttachmentType(b),h=URL.createObjectURL(b);a.previewHeight!=null&&a.previewWidth!=null?a={previewHeight:a.previewHeight,previewWidth:a.previewWidth}:b.type.includes("video/")?a=(yield m(h)):a=(yield l(h));return[{attachmentType:f,durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:e,offlineThreadingId:void 0,previewUrl:h,progress:0,threadKey:g},a]});return function(b){return a.apply(this,arguments)}}())));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield a.sync_groups.get((i||(i=d("I64"))).of_float(1))),e;if((c==null?void 0:c.syncParams)!=null){c=JSON.parse(c.syncParams);var f=c.preview_height;c=c.preview_width;e={previewHeight:f,previewWidth:c}}yield (k||(k=b("Promise"))).all(h.map(function(b){var c=b[0];b=b[1];return a.media_staging.add(babelHelpers["extends"]({},c,n(b,e)))}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":142")});return o.apply(this,arguments)}function e(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite",void 0,void 0,f.id+":168")}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":178")}function q(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=p;g.isVideoLikeImage=q}),98);
__d("WorkFailedSendMessageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6352");b=d("FalcoLoggerInternal").create("work_failed_send_message",a);e=b;g["default"]=e}),98);
__d("useCometAlertDialog",["FDSDialogLoadingState.react","react","requireDeferred","useCometDeferredDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k=c("requireDeferred")("CometAlertDialogImpl.react").__setRef("useCometAlertDialog");function l(){return i.jsx(c("FDSDialogLoadingState.react"),{})}l.displayName=l.name+" [from "+f.id+"]";function a(){var a=c("useCometDeferredDialog")(k,l);return j(function(b,c){c===void 0&&(c=function(){}),a(b,c)},[a])}g["default"]=a}),98);
__d("useMWXAlertDialog",["emptyFunction","react","useCometAlertDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useCometAlertDialog")();return i(function(d){var e=a.onClose==null?c("emptyFunction"):a.onClose;b(babelHelpers["extends"]({body:d.body},d),e)},[b,a.onClose])}g["default"]=a}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.react","MWChatFileUploadErrorDialog.react","MWMediaComposerRenderQpl","MWPActor.react","MWSharedMediaManagerUtils","OfflineThreadingId","Promise","WorkFailedSendMessageFalcoEvent","cr:8525","emptyFunction","gkx","promiseDone","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),l=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_media").warn("Unsupported thread type for media upload");return(j||(j=b("Promise"))).resolve(null)}return b("cr:8525").load()},m=c("gkx")("24138")?75:25;function n(a,d){if(d)if(c("gkx")("2237"))return l().then(function(c){return(j||(j=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a))!=null?c:[])});else return l().then(function(c){return(c=c==null?void 0:c.preprocess_DEPRECATED(a))!=null?c:(j||(j=b("Promise"))).resolve([])});else return k.load().then(function(b){return b.preprocess(a)})}function o(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=c(e,b);if(e.size>f*1024*1024)return f}return null}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB,p=g===void 0?function(){return m}:g,q=a.isChatSupportUser,r=a.maxNumberOfAttachments,s=a.onUploadFailure,t=a.onUploadStart,u=a.onUploadSuccess,v=a.showUploadFailureToast,w=a.thread,x=a.validateFileName,y=(i||(i=c("useReStore")))(),z=c("useMWXAlertDialog")({onClose:c("emptyFunction")}),A=d("LSMessagingThreadTypeUtil").isArmadilloSecure(w.threadType),B=d("MWSharedMediaManagerUtils").useMediaStaging(w),C=B.length,D=d("MWPActor.react").useActor();g=d("Int64Hooks").useCallbackInt64(function(a){var g=o(a,A,p);if(g!=null){z(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(g),c("emptyFunction"));return}if(r!=null&&C+a.length>r){c("gkx")("23249")?(z(d("MWChatFileUploadErrorDialog.react").maxFilesNumberExceeded(r),c("emptyFunction")),c("WorkFailedSendMessageFalcoEvent").log(function(){return{breaking_rule:"",event:"NUMBER_OF_ATTACHMENTS_LIMIT_REACHED"}})):z(d("MWChatFileUploadErrorDialog.react").maxMediaNumberExceeded(r),c("emptyFunction"));return}if(x!=null)for(g=0;g<a.length;g++){var i=a[g];if(!x(i)){z(d("MWChatFileUploadErrorDialog.react").unsupportedFile(),c("emptyFunction"));return}}var m=d("OfflineThreadingId").createForItemsInOrder(a);m.forEach(function(a){var b=a[0];a=a[1];d("MWMediaComposerRenderQpl").startMediaComposerRenderQpl(a,b,w);d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a,"preprocess_start")});c("promiseDone")(n(m,A)["catch"](function(){z(d("MWChatFilePreProcessingErrorDialog.react").invalidFileFormat,c("emptyFunction"));m.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(j||(j=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(y,a,w.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=w.threadKey;return A?l().then(function(c){return c==null?void 0:c.upload(y,b,a)}):k.load().then(function(c){return c.upload(y,b,a,v,t,u,s,q,e,f,(h||(h=d("I64"))).to_string(D))})}))},[D,e,f,y,p,q,A,r,C,s,t,u,z,v,w,x]);a=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(y,a).then(function(){if(A&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){c("gkx")("2237")?b.MAWMediaManagerAttachmentsV2["delete"](a):b.MAWMediaManagerAttachments["delete"](a)})}))};var E=function(){var a=B.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(y,a)["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).mustfix("Error deletting media staging.")})});A&&b("cr:8525")!=null&&c("promiseDone")(b("cr:8525").load().then(function(b){b.clearAttachments(a)}))};return{handleFileRemove:a,handleFileSelect:g,mediaStaging:B,resetAttachments:E}}g.useMediaManager=a}),98);
__d("MWPMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;e=b.createContext;var k=b.useCallback,l=b.useMemo,m=b.useState,n=c("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),o=e({clearReply:c("emptyFunction"),reply:void 0,setReply:c("emptyFunction")});function p(a){try{return JSON.parse(a)}catch(a){return}}function a(a){var b=a.children,c=a.clearThreadReply,e=a.getRepliesState,f=a.persistRepliesState,g=a.senderId;a=a.threadKey;e=e!=null&&a!=null?p(e((i||(i=d("I64"))).to_string(a))):void 0;a=m(e);var h=a[0],q=a[1],r=k(function(a,b){n.onReady(function(c){c.logClearReply(b,a,h!=null)});q();if(c!=null)return c((i||(i=d("I64"))).to_string(a))},[c,h]),s=k(function(a,b){n.onReady(function(c){c.logSetReply(h,a,b)});q(a);if(f!=null)return f({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,senderId:g,sendStatusV2:a.sendStatusV2,threadKey:(i||(i=d("I64"))).to_string(b),timestampMs:a.timestampMs})},[f,h,g]);e=l(function(){return{clearReply:r,reply:h,setReply:s}},[h,s,r]);return j.jsx(o.Provider,{value:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWPReplyContext=o;g.MWPReplyContextProvider=a}),98);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.createContext,m=e.useContext,n=l({blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,hasLSThreadBitOffset:function(a){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function a(a){var b=a.children,e=a.customCapabilityCheck,f=a.thread,g=f.capabilities,h=f.capabilities2,l=f.capabilities3,m=f.capabilities4,o=f.threadType,p=d("Int64Hooks").useCallbackInt64(function(a){var b={capabilities:g,capabilities2:h,capabilities3:l,capabilities4:m,threadType:o};return d("LSThreadBitOffset").has(a,b)},[g,h,l,m,o]);a=d("Int64Hooks").useMemoInt64(function(){var a;return{blurMediaEnabled:p(46),canUnsendMessage:f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:p(135),communityMessagingChannelInvite:p(120),disableLinks:p(45),editMessageEnabled:p(194),hasLSThreadBitOffset:(a=p)!=null?a:e,isPaused:f.threadStatus!=null&&(i||(i=d("I64"))).equal(f.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED)),localDeleteMessageEnabled:p(102),messageForwardEnabled:p(103),messageUnsendEnabled:p(122)&&f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:p(172),reactEnabled:p(18),reactionsV2WriteEnabled:p(169),replyEnabled:p(42),reportMessageToAdminEnabled:p(93),rtcVideoCallEnabled:p(24),rtcVoiceCallEnabled:p(25),seenCountV2Enabled:p(140),subThreadCreationEnabled:p(167)}},[e,p,f.threadStatus,f.cannotUnsendReason]);return k.jsx(n.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return m(n)}g.Provider=a;g.useMWPThreadCapabilitiesContext=b}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?"":b[0].join("")}).filter(function(a){return a!==""})}function a(a){var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.reactions).getKeyRange(a.threadKey,a.messageId,e)},[e,b,a.messageId,a.threadKey],f.id+":33");if(g!=null)return g.reaction}function b(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor&&(h||(h=d("I64"))).gt(a.count,(h||(h=d("I64"))).zero)}).map(function(a){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.tables.reaction_v2_types).getKeyRange(a.reactionFbid),f.id+":59");return[a==null?void 0:a.reactionLiteral,a==null?void 0:a.reactionLiteralVariant16].filter(Boolean)})},[b,a.threadKey,a.messageId],f.id+":50").flat();e=j(e);return e}function e(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor})},[b,a.messageId,a.threadKey],f.id+":79");return d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.reaction_v2_types).getKeyRange(e.reactionFbid).map(function(a){return a.reactionLiteral}):d("ReQL").empty()},[b,e],f.id+":87")}a={useSelectedReaction:a,useSelectedReactionsV2:b,useSelectedReactionV2:e};g.MWV2MessageReactionHooks=a}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){var e;return d("ReQL").fromTableDescending(b.tables.ai_bot_feedback_submission_status).getKeyRange((e=a)!=null?e:"").filter(function(a){return(h||(h=d("I64"))).equal(a.feedbackSubmissionStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(a){return a.feedbackSubmissionStatus})},[b,a],f.id+":25");return e}g["default"]=a}),98);
__d("useIGDOptimisticReactMessage",["I64","LSAuthorityLevel","MAWTimeUtils","WATimeUtils","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(){return j(function(a,e,g,h,j){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(j==null){var b=(yield a.reactions.get(e,g,h));yield a.reactions["delete"](e,g,h);return{removedReaction:b}}else{b={actorId:h,authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),messageId:g,reaction:(b=j)!=null?b:"",threadKey:e,timestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),transportKey:"Instamadillo"};yield a.reactions.upsert([e,g,h],b);return{addedReaction:b}}}catch(a){throw c("err")("Instamadillo: Failed to send or unsend optimistic reaction: "+a+" ")}});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":39")},[])}g["default"]=a}),98);
__d("useIsChatPreviewsEnabled",["MWCMisStandAloneCommunity","MWLSThread","ReQL","ReQLSuspense","isUnjoinedCMThread","qex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":28");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(a.needsAdminApprovalForNewParticipant===!0)return!1;if(!d("isUnjoinedCMThread").isUnjoinedCMThread(a.threadType))return!1;return c("MWCMisStandAloneCommunity")(b)?!0:c("MWCMisStandAloneCommunity")(b)||c("qex")._("71")===!0}g.useIsChatPreviewsEnabled=a;g.isChatPreviewsEnabled=i}),98);
__d("useIsMultiReactionEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMIsAnyCMThread","MWLSThread","ReQL","ReQLSuspense","gkx","isUnjoinedCMThread","qex","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":30");return(a=d("MWLSThread").useThread(a,function(a){if(d("isUnjoinedCMThread").isUnjoinedCMThread(a.threadType))return d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,g==null?void 0:g.communityType)&&c("gkx")("26368");if(!d("LSThreadBitOffset").has(156,a))return!1;if(c("MWCMIsAnyCMThread")(a.threadType))return c("gkx")("26368");if(d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType))return c("gkx")("26369")||c("qex")._("1412")}))!=null?a:!1}g.useIsMultiReactEnabled=a}),98);
__d("useIsReactionsV2Enabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":33");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(d("LSMessagingThreadTypeUtil").isOpenFnFThread(a))return!1;if(d("LSThreadBitOffset").has(139,a))return!0;a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return a?!0:!1}function b(a,b){var c=d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType);a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return c||a}g.useIsReactionsV2Enabled=a;g.isReactionsV2Enabled=i;g.isReactionsV2ReadOnly=b}),98);
__d("useLSMessagingSource",["MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();switch(a){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return"chatInThread";default:return"unknown"}}g["default"]=a}),98);
__d("useMWLSDefaultThreadSource",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useLSMessagingSource")();return i(function(b){return d("LSThreadAttributionTypeUtil").getSource(b,a)},[a])}g["default"]=a}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,g,h,j){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}function l(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,j,k){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")});return m.apply(this,arguments)}function n(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a){var e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSource")(),k=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey);return d("Int64Hooks").useCallbackInt64(function(h){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===h||a.reactionLiteralVariant16===h})));if(m!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!k||(j||(j=d("I64"))).equal(a.reactionFbid,m.reactionFbid))&&a.viewerIsReactor})));if(b==null)return n(e,g,a,m.reactionFbid,h);var o=(j||(j=d("I64"))).equal(b.reactionFbid,m.reactionFbid);(!k||o)&&(yield l(e,g,a,b.count,b.reactionFbid,h,k));o||(yield n(e,g,a,m.reactionFbid,h))}else c("FBLogger")("messenger_web_product").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return e.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:g,messageId:a.messageId,reaction:h,sendAttribution:i(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":226")})())},[e,a,k,g,i])}g["default"]=a}),98);
__d("useIGDGlobalReactMessage",["CometTaskFramework","FBLogger","I64","Int64Hooks","LSAuthorityLevel","MAWCurrentUser","MWPActor.react","ReQL","ReQLSuspense","asyncToGeneratorRuntime","promiseDone","react","requireDeferred","useIGDOptimisticReactMessage","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c,l=c("requireDeferred")("MWLogMessageAction").__setRef("useIGDGlobalReactMessage");function a(a,e){var g=k(18),i=(h||(h=c("useReStore")))(),j=d("MWPActor.react").useActor(),n=a.transportKey==="Instamadillo",o=c("useIGDOptimisticReactMessage")(),p;g[0]!==i.tables.e2ee_igMessageAuxiliaryInfo||g[1]!==a.messageId?(p=function(){return d("ReQL").fromTableAscending(i.tables.e2ee_igMessageAuxiliaryInfo).getKeyRange(a.messageId)},g[0]=i.tables.e2ee_igMessageAuxiliaryInfo,g[1]=a.messageId,g[2]=p):p=g[2];var q;g[3]!==i||g[4]!==a.messageId?(q=[i,a.messageId],g[3]=i,g[4]=a.messageId,g[5]=q):q=g[5];p=d("ReQLSuspense").useFirst(p,q,f.id+":51");var r=Boolean(p==null?void 0:p.openEb),s=c("useMWPSendOrUnsendReaction")(a);g[6]!==n||g[7]!==r||g[8]!==o||g[9]!==i||g[10]!==a.threadKey||g[11]!==a.messageId||g[12]!==a.senderId||g[13]!==j||g[14]!==s||g[15]!==e?(q=function(){return function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f){if(n||r){var g=(yield o(i,a.threadKey,a.messageId,j,b)),h=g.removedReaction;c("promiseDone")(c("CometTaskFramework")(d("MAWCurrentUser").getID()).issueTask("igd_react_message",{messageId:a.messageId,reaction:h!=null?h.reaction:b,reactionStatus:h!=null?"deleted":"created",threadKey:a.threadKey})["catch"](function(b){c("promiseDone")(m(i,a.threadKey,a.messageId,j,h));throw c("FBLogger")("igd_web_on_msgr").catching(b).warn("Instamadillo: Failed to send or unsend reaction: %s.",b)}))}else{s((g=b)!=null?g:"")}l.onReady(function(b){return c("promiseDone")(b.log(i,a.messageId,a.threadKey,e,f,void 0,void 0,void 0,a.senderId,void 0,j))})});return function(a,b){return f.apply(this,arguments)}}()},p=[n,r,o,a.threadKey,a.messageId,a.senderId,i,j,s,e],g[6]=n,g[7]=r,g[8]=o,g[9]=i,g[10]=a.threadKey,g[11]=a.messageId,g[12]=a.senderId,g[13]=j,g[14]=s,g[15]=e,g[16]=q,g[17]=p):(q=g[16],p=g[17]);return d("Int64Hooks").useMemoInt64(q,p)}function m(a,e,g,h,j){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(j!=null)return b.reactions.upsert([j.threadKey,j.messageId,j.actorId],babelHelpers["extends"]({},j));else{var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions).getKeyRange(e,g,h).filter(function(a){return(i||(i=d("I64"))).equal(a.authorityLevel,i.of_int32(c("LSAuthorityLevel").OPTIMISTIC))})));if(f!=null)return b.reactions["delete"](f.threadKey,f.messageId,f.actorId)}});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":149")}g["default"]=a}),98);
__d("useIGDIsGenAiReelsPlugin",["I64","LSIntEnum","MNLSXMALayoutType","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function a(a){var b=l(9),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.threadKey||b[2]!==a.messageId?(g=function(){return d("ReQL").fromTableDescending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.threadKey,b[2]=a.messageId,b[3]=g):g=b[3];var k;b[4]!==e||b[5]!==a?(k=[e,a],b[4]=e,b[5]=a,b[6]=k):k=b[6];g=d("ReQLSuspense").useFirst(g,k,f.id+":24");if(a.botResponseId==null||g==null)return!1;b[7]!==g?(k=g.hasXma&&g.xmaLayoutType!=null&&(i||(i=d("I64"))).equal(g.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)),b[7]=g,b[8]=k):k=b[8];return k}g["default"]=a}),98);
__d("useIGDMediaMangerUploadFailedToast",["fbt","IGDSErrorOutlineIcon.react","react","useIGDSToaster"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.c;function a(){var a=k(2),b=c("useIGDSToaster")(),d;a[0]!==b?(d=function(a,d){b.add({icon:j.jsx(c("IGDSErrorOutlineIcon.react"),{alt:h._("__JHASH__ScQg6mAoJXK__JHASH__")}),message:a,messageSecondary:d,target:"bottom-left"},{duration:2750})},a[0]=b,a[1]=d):d=a[1];return d}g["default"]=a}),226);
__d("useIGDMessageReply.react",["fbt","IGDInstamadilloUtils","IGDThreadListNewMessageLoggingDataContext","LSMessagingThreadTypeUtil","MWMediaManager","MWPReplyContext.react","MessengerWebUXLogger","react","useIGDMediaMangerUploadFailedToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i;b=i||d("react");var j=b.useContext,k=b.c;function a(a,b,e){var f=k(29),g=j(d("MWPReplyContext.react").MWPReplyContext),i=g.setReply;g=c("useIGDMediaMangerUploadFailedToast")();var l;f[0]!==g||f[1]!==b?(l={showUploadFailureToast:g,thread:b},f[0]=g,f[1]=b,f[2]=l):l=f[2];g=d("MWMediaManager").useMediaManager(l);var m=g.resetAttachments,n=c("MessengerWebUXLogger").useInteractionLogger(),o=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();f[3]!==b?(l=d("IGDInstamadilloUtils").isInstamadilloCutover(b),f[3]=b,f[4]=l):l=f[4];var p=l;f[5]!==b?(g=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(b),f[5]=b,f[6]=g):g=f[6];var q=g;f[7]!==b?(l=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(b),f[7]=b,f[8]=l):l=f[8];var r=l;f[9]!==b?(g=b?d("LSMessagingThreadTypeUtil").isArmadilloSecure(b.threadType):!1,f[9]=b,f[10]=g):g=f[10];var s=g;f[11]!==n||f[12]!==r||f[13]!==q||f[14]!==p||f[15]!==s||f[16]!==o||f[17]!==i||f[18]!==a.messageId||f[19]!==a.offlineThreadingId||f[20]!==a.sendStatusV2||f[21]!==a.timestampMs||f[22]!==a.threadKey||f[23]!==m||f[24]!==e?(l=function(b){n==null?void 0:n({eventName:"message_reply",extraData:{is_dm:String(r),is_instamadillo:String(q),is_instamadillo_tlc:String(p),is_secure:String(s)},flowInstanceId:o}),i({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,sendStatusV2:a.sendStatusV2,timestampMs:a.timestampMs},a.threadKey),m(),e==null?void 0:e()},f[11]=n,f[12]=r,f[13]=q,f[14]=p,f[15]=s,f[16]=o,f[17]=i,f[18]=a.messageId,f[19]=a.offlineThreadingId,f[20]=a.sendStatusV2,f[21]=a.timestampMs,f[22]=a.threadKey,f[23]=m,f[24]=e,f[25]=l):l=f[25];b=l;f[26]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__L3od8hyUAW0__JHASH__"),f[26]=g):g=f[26];l=g;f[27]!==b?(g=[b,l],f[27]=b,f[28]=g):g=f[28];return g}g["default"]=a}),226);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("MWPContactContext.react").useMWPContactStableContext();e=e.contact;if(a==null)return!1;return!b?!1:e!=null&&(h||(h=d("I64"))).equal(e.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT))}g["default"]=a}),98);